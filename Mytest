#!/bin/bash

# Variables
JAVA_HOME="/path/to/your/java/home"  # Replace with the path to your Java installation
JAR_FILE="myapp.jar"                # Replace with the name of your JAR file
LOG_FILE="application.log"          # Log file name

# Check if the JAVA_HOME directory exists
if [ ! -d "$JAVA_HOME" ]; then
    echo "JAVA_HOME directory not found: $JAVA_HOME"
    exit 1
fi

# Check if the JAR file exists
if [ ! -f "$JAR_FILE" ]; then
    echo "JAR file not found: $JAR_FILE"
    exit 1
fi

# Start the Spring Boot application
echo "Starting Spring Boot application with JAVA_HOME: $JAVA_HOME"
nohup "$JAVA_HOME/bin/java" -jar "$JAR_FILE" > "$LOG_FILE" 2>&1 &

# Get the process ID of the application
APP_PID=$!
echo "Spring Boot application started with PID: $APP_PID"

# Optional: Save the PID to a file for later use (e.g., for stopping the application)
echo $APP_PID > app.pid

# Background info message
echo "The application is running in the background."
echo "You can check the logs in: $LOG_FILE"
